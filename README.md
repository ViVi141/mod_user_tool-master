# 模组用户工具

## 简介

模组用户工具是一个用于帮助用户在Arma Reforger服务器中管理模组的工具。该工具支持从JSON文件加载服务器配置，解析并更新模组文件夹，生成模组信息文件以及将模组文件夹压缩成单独或一个整体的压缩包。通过图形化用户界面（GUI），用户可以更加直观和方便地进行服务器模组的管理。

## 运行方式

仅使用美化版入口：

```bash
python ui_enhanced.py
```

## 文件结构

```
mod_user_tool-master/
├── ui_enhanced.py              # 美化版主程序
├── ui_components_enhanced.py   # 增强版UI组件
├── mod_manager.py              # 模组管理核心功能
├── config.py                   # 配置常量
└──README.md                   # 项目总览（本文件）
```

## 主要功能

- **加载服务器JSON文件**：选择并加载服务器配置的JSON文件，解析并显示其中的模组信息。
- **粘贴并加载JSON内容**：直接在文本框中粘贴JSON内容，解析并加载到工具中。
- **选择源文件夹**：选择包含模组文件夹的源文件夹。
- **选择目标文件夹**：选择将模组文件夹复制到的目标文件夹。
- **复制模组并单个压缩和导出JSON**：复制需要更新的模组文件夹到目标文件夹，对每个模组文件夹进行单独压缩，并生成包含模组信息的JSON文件。
- **仅复制模组**：仅复制需要更新的模组文件夹到目标文件夹，不进行压缩和删除操作。
- **仅导出模组信息JSON**：仅根据服务器配置生成包含模组信息的JSON文件，不进行复制和压缩操作。
- **复制模组并打包成一个压缩包**：复制需要更新的模组文件夹到目标文件夹，生成包含模组信息的JSON文件，并将所有模组文件夹打包成一个单独的压缩包，不进行嵌套。

## 使用方法

1. **加载JSON文件**：
   - 点击“选择服务器用JSON文件”输入框右侧的“浏览”按钮。
   - 选择一个服务器配置的JSON文件，工具将自动解析并显示其中的模组信息。

2. **粘贴JSON内容**：
   - 在“粘贴游戏中JSON内容”文本框中粘贴JSON内容。
   - 点击“加载JSON”按钮，工具将解析并加载粘贴的JSON内容。

3. **选择文件夹**：
   - 点击“选择源文件夹”输入框右侧的“浏览”按钮，选择包含模组文件夹的源文件夹。
   - 点击“选择目标文件夹”输入框右侧的“浏览”按钮，选择将模组文件夹复制到的目标文件夹。

4. **操作按钮**：
   - **复制模组并单个压缩和导出JSON**：点击该按钮，工具将根据JSON文件中的模组ID查找模组文件夹，复制到目标文件夹，并对每个模组文件夹单独压缩，同时生成模组信息的JSON文件。
   - **仅复制模组**：点击该按钮，仅复制需要更新的模组文件夹到目标文件夹。
   - **仅导出模组信息JSON**：点击该按钮，仅根据服务器配置生成模组信息的JSON文件。
   - **复制模组并打包成一个压缩包**：点击该按钮，复制需要更新的模组文件夹到目标文件夹，生成模组信息的JSON文件，并将所有模组文件夹打包成一个单独的压缩包。

5. **查看日志**：
   - 操作过程中，所有信息将以日志的形式显示在日志文本框中。用户可以通过日志查看操作的详细过程和结果，以便检查和解决问题。

## 注意事项

- 确保输入的JSON格式正确。
- 目标文件夹路径应正确设置，以便保存复制的模组文件夹和生成的JSON文件。
- 在执行操作时，工具会禁用相应的按钮以防止重复操作。
- 如果操作过程中出现错误，工具将通过消息框和日志文本框显示错误信息。
- 
## 智能更新说明（摘要）

- 仅当版本号不同或目标缺失时更新；跳过版本相同的模组。
- 更新内容不会直接覆盖现有目录，而是复制到目标下的 `mods_update/` 子文件夹。
- 在 `mods_update/` 中会生成汇总的 `mod_info.json`。

更多细节：

1) 版本号检查：版本不同时更新，版本相同时跳过。
2) 新模组检测：JSON 列表存在但目标缺失则作为新模组复制。
3) 更新流程：解析配置 → 扫描源目录 → 比较版本 → 复制到 `mods_update/` → 生成 `mod_info.json`。

## 系统要求与依赖

- Python 3.7+
- Windows 10/11（推荐）
- 依赖：Python 标准库（tkinter、json、os、shutil、threading）

## 作者与许可证

- 作者：ViVi141（QQ: 747384120）
- 许可证： AGPL-3.0 license（详见 `LICENSE`）
"# mod_user_tool-master" 
